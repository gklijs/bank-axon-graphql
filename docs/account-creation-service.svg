<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1238px" preserveAspectRatio="none" style="width:2386px;height:1238px;" version="1.1" viewBox="0 0 2386 1238" width="2386px" zoomAndPan="magnify"><defs/><g><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="74" cy="241" fill="#FFFFFF" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M74,257 L74,311 M48,273 L100,273 M74,311 L48,341 M74,311 L100,341 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="124" x="12" y="395.2422">client</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="250" x="1663" y="651"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1653" y="661"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1653" y="731.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="210" x="1683" y="719.2422">producer</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="272" x="842" y="651"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="832" y="661"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="832" y="731.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="232" x="862" y="719.2422">consumer</text><!--MD5=[1c5ba14a582780a0070707c3598231a5]
entity ac--><path d="M1689,275 C1689,255 1802,255 1802,255 C1802,255 1915,255 1915,275 L1915,353.9375 C1915,373.9375 1802,373.9375 1802,373.9375 C1802,373.9375 1689,373.9375 1689,353.9375 L1689,275 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M1689,275 C1689,295 1802,295 1802,295 C1802,295 1915,295 1915,275 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="186" x="1709" y="351.2422">account</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="430" x="697" y="264"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="687" y="274"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="687" y="344.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="390" x="717" y="332.2422">schema-provider</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="166" x="1339" y="1117"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1329" y="1127"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1329" y="1197.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="126" x="1359" y="1185.2422">kafka</text><!--MD5=[f84e5b74347a0f3a1699ea7d0f690775]
link ac to p--><path d="M1799.8432,373.6206 C1797.226,445.9674 1792.8372,567.2884 1790.2004,640.1742 " fill="none" id="ac-&gt;p" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1789.8246,650.5648,1798.4705,632.866,1790.1863,640.5713,1782.4809,632.2872,1789.8246,650.5648" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="560" x="1798" y="547.2422">make request using uuid</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M974.2754,761.4466 C972.8776,839.806 982.649,975.9842 1058,1057 C1096.104,1097.9686 1243.3234,1132.9086 1338.4614,1151.843 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="974.5264,751.252,966.086,769.0498,974.2804,761.249,982.0812,769.4434,974.5264,751.252" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="240" x="1060" y="861.2422">consumes</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="630" x="1060" y="922.1797">AccountCreationConfirmed</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="86" x="1060" y="983.1172">and</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="524" x="1060" y="1044.0547">AccountCreationFailed</text><!--MD5=[ce416eb35adc1d8056c0af1bbec5e02c]
link cl to sp--><path d="M146.9252,314 C265.8778,314 506.4244,314 686.2084,314 " fill="none" id="cl-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="696.3388,314,678.3388,306,686.3388,314,678.3388,322,696.3388,314" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="136.3016,314,154.3016,322,146.3016,314,154.3016,306,136.3016,314" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="372" x="172.5" y="172.2422">request account</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="280" x="172.5" y="233.1797">using server</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="488" x="172.5" y="294.1172">needs token and iban</text><!--MD5=[3d5bb7116be908011d48e5281f82d7be]
link sp to ac--><path d="M1127.4442,314 C1300.267,314 1536.701,314 1678.871,314 " fill="none" id="sp-&gt;ac" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1688.9422,314,1670.9422,306,1678.9422,314,1670.9422,322,1688.9422,314" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="356" x="1164" y="50.2422">if the username</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="314" x="1164" y="111.1797">already exists</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="488" x="1164" y="172.1172">checks the password</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="366" x="1164" y="233.0547">otherwise insert</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="314" x="1164" y="293.9922">with new uuid</text><!--MD5=[17ddfbfa79ec15258e7fd3d6d2dc71ca]
link p to kc--><path d="M1790.7,751.1692 C1791.999,826.6208 1783.3548,969.7432 1708,1057 C1659.4824,1113.1808 1578.8872,1140.7976 1515.5968,1154.298 " fill="none" id="p-&gt;kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1505.5952,1156.3458,1524.8341,1160.5723,1515.3919,1154.3398,1521.6245,1144.8976,1505.5952,1156.3458" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="218" x="1790" y="922.2422">produces</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="572" x="1790" y="983.1797">ConfirmAccountCreation</text><!--MD5=[84432b9fded1b1d6df0371e519366671]
reverse link sp to c--><path d="M922.317,374.4948 C935.2718,450.4576 957.263,579.406 969.3696,650.394 " fill="none" id="sp&lt;-c" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="920.6284,364.5934,915.7683,383.6821,922.3095,374.4511,931.5406,380.9923,920.6284,364.5934" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="458" x="1002" y="517.2422">send AccountResult</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="538" x="962" y="578.1797">for active subscriptions</text><!--MD5=[8391059885caa93233a7c3eb94b8e691]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26

actor client as cl #White
component producer as p #Yellow
component consumer as c #Yellow
database account as ac #LightBlue
component "schema-provider" as sp #Yellow
component "kafka" as kc #LightGrey

ac - -> p :make request using uuid
c <- - kc :consumes\lAccountCreationConfirmed\nand\nAccountCreationFailed
cl <-right-> sp :request account\lusing server\nneeds token and iban
sp -> ac :if the username\lalready exists\nchecks the password\notherwise insert\nwith new uuid
p - -> kc :produces\lConfirmAccountCreation
sp <- - c :send AccountResult\nfor active subscriptions

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>