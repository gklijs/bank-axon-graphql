<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1020px" preserveAspectRatio="none" style="width:1906px;height:1020px;" version="1.1" viewBox="0 0 1906 1020" width="1906px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="496.6875" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="880" y="463.75"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="84" x2="84" y1="192.9375" y2="996.4375"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="889" x2="889" y1="192.9375" y2="996.4375"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1505" x2="1505" y1="192.9375" y2="996.4375"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1822" x2="1822" y1="192.9375" y2="996.4375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="124" x="16" y="180.2422">client</text><ellipse cx="84" cy="26" fill="#FFFFFF" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M84,42 L84,96 M58,58 L110,58 M84,96 L58,126 M84,96 L110,126 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="418" x="675" y="180.2422">GraphQL endpoint</text><ellipse cx="890" cy="100" fill="#FFFF00" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="866" x2="914" y1="128" y2="128"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="318" x="1341" y="180.2422">transactiondb</text><path d="M1470,60 C1470,40 1506,40 1506,40 C1506,40 1542,40 1542,60 L1542,112 C1542,132 1506,132 1506,132 C1506,132 1470,132 1470,112 L1470,60 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M1470,60 C1470,80 1506,80 1506,80 C1506,80 1542,80 1542,60 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="132" x="1750" y="180.2422">Kafka</text><path d="M1781,76 L1781,124 M1781,100 L1815,100 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><ellipse cx="1839" cy="100" fill="#D3D3D3" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><rect fill="#FFFFFF" height="496.6875" style="stroke: #A80036; stroke-width: 2.0;" width="20" x="880" y="463.75"/><polygon fill="#A80036" points="866,277.875,886,285.875,866,293.875,874,285.875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="84" x2="878" y1="285.875" y2="285.875"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="758" x="98" y="269.1797">Subscribe to get_account stream</text><polygon fill="#A80036" points="1482,366.8125,1502,374.8125,1482,382.8125,1490,374.8125" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="890" x2="1494" y1="374.8125" y2="374.8125"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="568" x="904" y="358.1172">Create account with uuid</text><polygon fill="#A80036" points="1798,455.75,1818,463.75,1798,471.75,1806,463.75" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="900" x2="1810" y1="463.75" y2="463.75"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="830" x="914" y="447.0547">Send an account creation command</text><polygon fill="#A80036" points="922,544.6875,902,552.6875,922,560.6875,914,552.6875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="910" x2="1820" y1="552.6875" y2="552.6875"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="874" x="934" y="535.9922">Sends records about account creation</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="900" x2="984" y1="641.625" y2="641.625"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="984" x2="984" y1="641.625" y2="667.625"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="902" x2="984" y1="667.625" y2="667.625"/><polygon fill="#A80036" points="922,659.625,902,667.625,922,675.625,914,667.625" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="294" x="914" y="624.9297">Filter on uuid</text><polygon fill="#A80036" points="106,748.5625,86,756.5625,106,764.5625,98,756.5625" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="94" x2="878" y1="756.5625" y2="756.5625"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="654" x="118" y="739.8672">Send account creation result</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="84" x2="168" y1="845.5" y2="845.5"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="168" x2="168" y1="845.5" y2="871.5"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="86" x2="168" y1="871.5" y2="871.5"/><polygon fill="#A80036" points="106,863.5,86,871.5,106,879.5,98,871.5" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="682" x="98" y="828.8047">Store bank account and token</text><polygon fill="#A80036" points="866,952.4375,886,960.4375,866,968.4375,874,960.4375" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="84" x2="878" y1="960.4375" y2="960.4375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="546" x="98" y="943.7422">End subscription with id</text><!--MD5=[8752c196f83aa18862debb581dfd5432]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26
hide footbox

actor client as cl #White
entity "GraphQL endpoint" as ge #Yellow
database transactiondb as pgt #LightBlue
boundary "Kafka" as ka #LightGrey

cl -> ge : Subscribe to get_account stream
ge -> pgt : Create account with uuid
ge -> ka : Send an account creation command
activate ge
ka -> ge : Sends records about account creation
ge -> ge : Filter on uuid
ge -> cl : Send account creation result
cl -> cl : Store bank account and token
cl -> ge : End subscription with id
deactivate ge

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>