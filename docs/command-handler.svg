<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="898px" preserveAspectRatio="none" style="width:2960px;height:898px;" version="1.1" viewBox="0 0 2960 898" width="2960px" zoomAndPan="magnify"><defs/><g><!--MD5=[c52c3416bb7232c8d9e7f68ae0cdbba0]
cluster nl.openweb.command-handler.core.clj--><polygon fill="#FFFFFF" points="400.1154,32,1330.1154,32,1344.1154,104.9375,1794.1154,104.9375,1794.1154,230,400.1154,230,400.1154,32" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="400.1154" x2="1344.1154" y1="104.9375" y2="104.9375"/><text fill="#000000" font-family="Roboto" font-size="52" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="918" x="408.1154" y="84.2422">nl.openweb.command-handler.core.clj</text><!--MD5=[340a6fcb7c2a101ebd2ab939719ee727]
cluster balancedb--><polygon fill="#FFFFFF" points="458.1154,658,716.1154,658,730.1154,730.9375,1108.1154,730.9375,1108.1154,874,458.1154,874,458.1154,658" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="458.1154" x2="730.1154" y1="730.9375" y2="730.9375"/><text fill="#000000" font-family="Roboto" font-size="52" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="466.1154" y="710.2422">balancedb</text><!--MD5=[3e86bdde7a8e8c640815745198aeca95]
entity mth--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="316" x="416.1154" y="114"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="406.1154" y="124"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="406.1154" y="194.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="276" x="436.1154" y="182.2422">cmt-handler</text><!--MD5=[b7bb3adeb3f661c4a5c6ffe8dcfe7071]
entity ach--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="310" x="803.1154" y="114"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="793.1154" y="124"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="793.1154" y="194.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="270" x="823.1154" y="182.2422">cac-handler</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="272" x="1184.1154" y="114"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1174.1154" y="124"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1174.1154" y="194.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="232" x="1204.1154" y="182.2422">consumer</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="250" x="1527.1154" y="114"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1517.1154" y="124"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1517.1154" y="194.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="210" x="1547.1154" y="182.2422">producer</text><!--MD5=[2dfd16c97e330aeee31d39df6edcc58f]
entity balance--><path d="M675.1154,760 C675.1154,740 786.1154,740 786.1154,740 C786.1154,740 897.1154,740 897.1154,760 L897.1154,838.9375 C897.1154,858.9375 786.1154,858.9375 786.1154,858.9375 C786.1154,858.9375 675.1154,858.9375 675.1154,838.9375 L675.1154,760 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M675.1154,760 C675.1154,780 786.1154,780 786.1154,780 C786.1154,780 897.1154,780 897.1154,760 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="182" x="695.1154" y="836.2422">balance</text><!--MD5=[434be88e8469740fc1e7400864b00989]
entity cac--><path d="M968.1154,760 C968.1154,740 1030.1154,740 1030.1154,740 C1030.1154,740 1092.1154,740 1092.1154,760 L1092.1154,838.9375 C1092.1154,858.9375 1030.1154,858.9375 1030.1154,858.9375 C1030.1154,858.9375 968.1154,858.9375 968.1154,838.9375 L968.1154,760 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M968.1154,760 C968.1154,780 1030.1154,780 1030.1154,780 C1030.1154,780 1092.1154,780 1092.1154,760 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="84" x="988.1154" y="836.2422">cac</text><!--MD5=[675c7a1b94b3fdea487d79d7a4066ba5]
entity cmt--><path d="M475.1154,760 C475.1154,740 540.1154,740 540.1154,740 C540.1154,740 605.1154,740 605.1154,760 L605.1154,838.9375 C605.1154,858.9375 540.1154,858.9375 540.1154,858.9375 C540.1154,858.9375 475.1154,858.9375 475.1154,838.9375 L475.1154,760 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M475.1154,760 C475.1154,780 540.1154,780 540.1154,780 C540.1154,780 605.1154,780 605.1154,760 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="90" x="495.1154" y="836.2422">cmt</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#F26724" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="172" x="1850.1154" y="749"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1840.1154" y="759"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1840.1154" y="829.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="132" x="1870.1154" y="817.2422">Kafka</text><!--MD5=[1ed0ebabc1660dc377719ba4cd2ee996]
link mth to cmt--><path d="M415.8408,178.4906 C289.4912,193.7214 127.0668,222.7904 86.1154,274 C-16.032,401.7354 -8.7734,508.7838 86.1154,642 C130.7346,704.6418 346.7064,758.513 463.9718,783.7374 " fill="none" id="mth-&gt;cmt" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="474.3122,785.9426,458.3767,774.3642,464.5321,783.8569,455.0395,790.0123,474.3122,785.9426" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="320" x="88.1154" y="446.2422">check/update</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="140" x="178.1154" y="507.1797">status</text><!--MD5=[68028bdd73b1f57e0a8c73f0b570c9c4]
link ach to cac--><path d="M1039.1286,214.0148 C1058.8124,230.4876 1077.2932,250.666 1088.1154,274 C1158.1974,425.1042 1099.6288,626.0864 1059.6916,730.0946 " fill="none" id="ach-&gt;cac" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1055.8898,739.8524,1069.8789,725.985,1059.5204,730.5347,1054.9707,720.1761,1055.8898,739.8524" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="320" x="1124.1154" y="446.2422">check/update</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="140" x="1214.1154" y="507.1797">status</text><!--MD5=[030376e7047580cc9dc3c9f030fa975a]
link mth to balance--><path d="M519.3284,214.527 C504.3188,231.7686 490.0168,252.2366 482.1154,274 C426.2996,427.7368 372.4448,520.6626 482.1154,642 C505.7792,668.1812 608.1032,643.1458 640.1154,658 C676.345,674.8112 709.1132,704.3758 734.3832,732.1054 " fill="none" id="mth-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="741.3084,739.8658,735.2924,721.1092,734.6502,732.4047,723.3547,731.7624,741.3084,739.8658" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="320" x="484.1154" y="446.2422">check/update</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="182" x="553.1154" y="507.1797">balance</text><!--MD5=[a8f8c1df50a7f3ff65524a193e4acba5]
link ach to balance--><path d="M919.0742,214.2052 C906.8022,232.1972 894.3264,253.1936 886.1154,274 C825.1748,428.4206 854.9008,479.259 822.1154,642 C816.3114,670.81 809.2058,702.4246 802.8452,729.686 " fill="none" id="ach-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="800.5394,739.5194,812.4378,723.8214,802.8226,729.7835,796.8604,720.1683,800.5394,739.5194" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="172" x="893.1154" y="446.2422">creates</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="182" x="888.1154" y="507.1797">balance</text><!--MD5=[17ddfbfa79ec15258e7fd3d6d2dc71ca]
link p to kc--><path d="M1777.2512,170.0114 C1928.1668,180.1876 2168.5692,206.754 2224.1154,274 C2328.2756,400.0994 2307.6218,501.369 2224.1154,642 C2182.824,711.538 2098.7144,752.2398 2032.0006,774.6992 " fill="none" id="p-&gt;kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2022.291,777.8818,2041.8874,779.8771,2031.7935,774.767,2036.9037,764.6731,2022.291,777.8818" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="640" x="2296.1154" y="324.2422">AccountCreationConfirmed,</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="534" x="2349.1154" y="385.1797">AccountCreationFailed,</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="606" x="2313.1154" y="446.1172">MoneyTransferConfirmed,</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="588" x="2322.1154" y="507.0547">MoneyTransferFailed and</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="390" x="2421.1154" y="567.9922">BalanceChanged</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="428" x="2402.1154" y="628.9297">(3 different topics)</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M1411.9764,220.6898 C1430.8414,235.9772 1448.9382,253.9268 1462.1154,274 C1554.7522,415.1178 1445.5008,514.4844 1556.1154,642 C1631.6556,729.0822 1763.119,768.7746 1849.8826,786.2124 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1403.8564,214.3026,1413.0582,231.7189,1411.7163,220.4851,1422.9501,219.1431,1403.8564,214.3026" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="572" x="1596.1154" y="446.2422">ConfirmAccountCreation</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="636" x="1570.1154" y="507.1797">and ConfirmMoneyTransfer</text><!--MD5=[69343530b30aab2eb706f0079b2219fe]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26

package "nl.openweb.command-handler.core.clj" #White{
    component "cmt-handler" as mth #Yellow
    component "cac-handler" as ach #Yellow
    component consumer as c #Yellow
    component producer as p #Yellow
}
package balancedb #White{
    database balance #LightBlue
    database cac #LightBlue
    database cmt #LightBlue
}
component Kafka as kc #F26724

mth - -> cmt :check/update\nstatus
ach - -> cac :check/update\nstatus
mth - -> balance :check/update\nbalance
ach - -> balance :creates\nbalance
p - -> kc :AccountCreationConfirmed,\nAccountCreationFailed,\nMoneyTransferConfirmed,\nMoneyTransferFailed and\nBalanceChanged\n(3 different topics)
c <- - kc :ConfirmAccountCreation\n and ConfirmMoneyTransfer

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>